---
title: "simulation"
author: "He Junhui"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(microbenchmark)
library(parallel)
library(Matrix)
library(RSpectra)
```

```{r}
Sys.setlocale("LC_ALL","English")
```
```{r}
n = 2400
d = 2
s = 600
r = 3
X = matrix(rnorm(n*d), n, d)
```


```{r}
cl = makeCluster(8)
microbenchmark({
  U = subsample(X, s, method = "random")
  Z = LAE(X, U, r, cl=cl)
  eigenpairs = truncated_SVD(Z)
},
times = 1)
stopCluster(cl)
```


